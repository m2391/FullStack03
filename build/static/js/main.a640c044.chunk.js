(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(0),a=t(1),r=t(15),u=t.n(r),o=t(6),i=t(3),s=function(e){return Object(c.jsxs)("form",{onSubmit:e.addPerson,children:["Name:",Object(c.jsx)("input",{value:e.newName,onChange:e.handleNameChange}),Object(c.jsx)("br",{}),"Number:",Object(c.jsx)("input",{value:e.newNumber,onChange:e.handleNumberChange}),Object(c.jsx)("br",{}),Object(c.jsx)("button",{type:"submit",children:"Add"})]})},l=function(e){return Object(c.jsxs)("form",{children:["Search:",Object(c.jsx)("input",{value:e.newSearch,onChange:e.handleSearchChange}),Object(c.jsx)("br",{})]})},d=function(e,n){return Object(c.jsxs)("li",{children:[e.name,"  ",e.number," ",Object(c.jsx)("button",{onClick:e.deletePerson,children:"Delete"})]})},h=function(e){return Object(c.jsx)("ul",{children:e.persons.filter((function(n){return n.name.toUpperCase().includes(e.newSearch.toUpperCase())})).map((function(n){return Object(c.jsx)(d,{name:n.name,number:n.number,deletePerson:e.handleDeletePerson(n.name,n.id)},n.id)}))})},b=t(4),j=t.n(b),f="/api/persons",m=function(){return j.a.get(f).then((function(e){return e.data}))},O=function(e){return j.a.post(f,e).then((function(e){return e.data}))},p=function(e,n){return j.a.put("".concat(f,"/").concat(e),n).then((function(e){return e.data}))},x=function(e){return j.a.delete("".concat(f,"/").concat(e)).then((function(e){return e.data}))},g=function(e){var n=e.message;return null===n?null:Object(c.jsx)("div",{className:"error",children:n})},w=function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],r=n[1],u=Object(a.useState)(""),d=Object(i.a)(u,2),b=d[0],j=d[1],f=Object(a.useState)(""),w=Object(i.a)(f,2),v=w[0],N=w[1],S=Object(a.useState)(""),C=Object(i.a)(S,2),D=C[0],P=C[1],k=Object(a.useState)(null),y=Object(i.a)(k,2),U=y[0],T=y[1];Object(a.useEffect)((function(){m().then((function(e){r(e)}))}),[]);return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(g,{message:U}),Object(c.jsx)(l,{newSearch:D,handleSearchChange:function(e){P(e.target.value)}}),Object(c.jsx)("h3",{children:"Add New"}),Object(c.jsx)(s,{newName:b,newNumber:v,handleNameChange:function(e){j(e.target.value)},handleNumberChange:function(e){N(e.target.value)},addPerson:function(e){e.preventDefault();var n={name:b,number:v,id:Math.floor(101*Math.random())};if(t.filter((function(e){return e.name===n.name})).length>0){if(window.confirm("".concat(n.name," already added to phonebook"))){var c=t.find((function(e){return e.name===b}));p(c.id,Object(o.a)(Object(o.a)({},c),{},{number:v})).then((function(e){r(t.map((function(n){return n.name===b?e:n})))})).catch((function(e){console.log(e),T("Uptade is completed")})),r(t.concat(n)),T(" ".concat(n.name," number was changed")),j(""),N(""),setTimeout((function(){T(null)}),3e3)}}else O(n).then((function(e){r(t.concat(e)),T(" ".concat(n.name," was added")),j(""),N("")})).catch((function(e){T("".concat(e.response.data.error)),console.log(e.response.data)})),setTimeout((function(){T(null)}),3e3)}}),Object(c.jsx)("h3",{children:"Numbers"}),Object(c.jsx)(h,{persons:t,newSearch:D,handleDeletePerson:function(e,n){return function(){window.confirm("Do you want to Delete ".concat(e," ?"))&&(x(n).then((function(){r(t.filter((function(e){return e.id!==n}))),T("".concat(e," was Deleted")),j(""),N("")})).catch((function(n){r(t.filter((function(n){return n.name!==e}))),T("User ".concat(e," has already been removed."))})),setTimeout((function(){T(null)}),3e3))}}})]})};t(38);u.a.render(Object(c.jsx)(w,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.a640c044.chunk.js.map